<template>
    <select v-show="lang" v-model="lang" class="language-selector">
        <option
            v-for="lang in supportedLanguages"
            v-bind:key="lang"
            :value="lang"
        >
            {{ $t('language.' + lang) }}
        </option>
    </select>
</template>

<script>
import supportedLanguages from '~/lang/lang.js';

export default {
    mixins: [supportedLanguages],
    data: () => ({
        lang: ''
    }),
    watch: {
        lang(newValue) {
            if( localStorage.getItem('lang') && localStorage.getItem('lang') !== newValue ) {
                this.$i18n.locale = newValue;
                localStorage.setItem('lang', newValue);
            }
        },
    },
    mounted() {
        if( localStorage.getItem('lang') ) {
            this.lang = localStorage.getItem('lang');
            this.$i18n.locale = localStorage.getItem('lang');
        }
    },
}
</script>

<style scoped>
.language-selector {
    width: 100px;
    height: 30px;
    font-size: 12px;
    padding: 4px 18px;
    display: inline-block;
    margin-bottom: 4px;
}
</style>
